<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Database</title>
        <link rel="stylesheet" href="/style.css"></link>
        <script src="common.js"></script>
        <script type="text/javascript">
            window.onload = loadFacilities;
            function loadFacilities() {
                get("/rest/getFacilities").then(data => {
                    facilities = JSON.parse(data);
                    facilityList = document.getElementById("facilityList");
                    for(var i = 0; i < facilities.length; i++) {
                        facilityList.innerHTML += "<li class=\"sidebar\">" +
                            "<a class=\"sidebar\" href=\"#\" onclick=\"populateFacility('"+facilities[i].name+"')\">" +
                            "<img width=32 height=32 src=\"" + (facilities[i].image || "/images/unknownSite.png") + "\" alt=\"Image\">" +
                            facilities[i].name +
                            "</li></a>";
                    }
                });
            }
            function populateFacility(name) {
                get("/rest/getFacilityData?name="+name).then(data => {
                    facility = JSON.parse(data);
                    facilityInfo = document.getElementById("facilityInfo");
                    result = "";
                    result = "<h2>" + facility.name + "</h2>";
                    result += "<h3>Located in: " + facility.location + "</h3>";
                    result += "<p>Equipment:</p><ul>"
                    for(var i = 0; i < facility.equipment.length; i++) {
                        result += "<li>" + facility.equipment[i].name + "</li>";
                    }
                    result += "</ul>";
                    facilityInfo.innerHTML = result;
                });
            }
        </script>
    </head>
    <body>
        <div th:replace="fragments/header :: header">...</div>
        <div style="display:flex;height:100%;flex-direction:row">
            <ul id="facilityList" class="sidebar"></ul>
            <div id="facilityInfo" style="width:100%"></div>
        </div>
    </body>
</html>